# 《征服C指针》阅读笔记

#### 缘由
上个周末参加了SF的分享会，听了一位来自QQ浏览器的工程师关于iOS内存管理的分享。当初认为iOS上的内存管理不重要，也不会出多大的篓子，基本概念比如引用计数什么的明白原理就好。然而听分享的时候还是云里雾里大概只能听懂70%，回去之后反思了一下，大学时候的c学的就很烂，都是只是会用，如果想精进就必须要明白其中的原理，《征服C指针》这本书以前就听说过，很多同学推荐过，不过大概是大学期间确实玩心太重，不能耐下心来去看这种既不能提高绩点，又不能和当时实习挂钩的书（当年实习的大型机真是荒废了半年多的时光啊）。想那么多，不如现在就开始做，这篇读书笔记一是为了分享，也是为了督促自己。目测会有好几篇。那就开始吧！

### 第一章 从基础开始
#### 1.1 什么是C
这一节主要介绍了c的由来，我以前一直以为**sizeof**只是一个函数，没想到竟然是关键字。太菜了，惭愧惭愧。
#### 1.2 关于指针
不得不说，即使是基础介绍的一章，也涨了姿势。
这里有指针**a**

1. 如果**a**保存了其他变量的地址，可以说是**a**指向该地址。
2. ***a**等同于**a**指向的变量。

疑问：

```c
    int a = 5;
    void *b = &a;
    b++;
    printf("%p\n",&a);
    printf("%lu\n",sizeof(int));
    printf("%p\n",(int *)b);
```

我运行上面代码的时候地址加1并没有加4？why？
结论：因为我声明的无类型指针，系统不知道自加的时候要加多少。

#### 1.3 关于数组

1. **p[i]**只是***(p + i)**的简写。这个结论真是涨姿势了。**[]**只是一个语法糖而已。
2. 使用指针的效率并不会更高。
3. 对数组进行值传递的时候，将数组整体整理成结构体成员。

### 第二章 C是怎么使用内存的
#### 2.1 虚拟地址
要点：程序面对的都是虚拟地址空间（这些结论已经有一定了解了）

#### 2.2 内存的使用方法

1. 全局变量：定义在函数外面的变量都为全局变量
2. **static**：除去声明为静态变量外，全局变量加上**static** 后限定作用域在源代码文件中。
3. 局部变量声明在函数中。


